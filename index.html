<!DOCTYPE html>
<!-- Chosen Palette: Cool Gray -->
<!-- 
Application Structure Plan: 
Aplikasi ini dirancang sebagai SPA (Single Page Application) dengan sistem tab untuk memisahkan fungsi-fungsi utama, meniru alur kerja akuntansi yang logis.
1.  **Tab Jurnal Umum:** Halaman utama untuk input data. Format input diubah menjadi satu baris per transaksi sederhana, dengan kolom terpisah untuk "Akun Debit" dan "Akun Kredit" serta satu kolom "Jumlah". Logika penyimpanan diperbarui: saat tombol "Simpan" diklik, semua baris yang diinput akan diberi 'No. Bukti' yang sama, sehingga digabungkan menjadi satu grup transaksi.
2.  **Tab Buku Besar:** Tidak ada perubahan pada logika tab ini. Karena data tetap disimpan sebagai jurnal umum standar, Buku Besar akan berfungsi seperti sebelumnya, menampilkan riwayat transaksi per akun.
3.  **NEW - Tab Neraca:** Menampilkan laporan posisi keuangan dengan Aktiva di satu sisi dan Pasiva (Liabilitas + Ekuitas) di sisi lain, memastikan keseimbangan.
4.  **Tab Laporan Laba Rugi:** Tidak ada perubahan pada logika tab ini. Laporan akan tetap akurat karena dihitung dari data jurnal umum standar yang telah diolah dari input pengguna.
5.  **NEW - Tab Arus Kas:** Memberikan laporan arus kas yang disederhanakan, dikategorikan ke dalam aktivitas Operasi, Investasi, dan Pendanaan.
6.  **UPDATED - Tab Data Piutang:** Diubah menjadi modul manajemen piutang interaktif. Pengguna bisa menambah piutang baru (nama pelanggan, jumlah, tanggal, dll.). Setiap penambahan akan otomatis membuat jurnal (Debit Piutang Usaha, Kredit Pendapatan), mengintegrasikan data ke seluruh laporan keuangan. **NEW: Menambahkan fitur pembayaran piutang (lunas/sebagian) yang juga terintegrasi dengan penjurnalan otomatis.**
7.  **NEW - Tab Stok Barang:** Fitur mandiri untuk manajemen inventaris sederhana, memungkinkan pengguna menambah, mengubah, dan menghapus item stok. Data stok disimpan terpisah.
8.  **Tab Pengaturan:** Tetap berfungsi untuk mengelola daftar akun dan kelompok. Fungsi manajemen data (impor/ekspor/laporan PDF) tetap ada.
Struktur ini memberikan kemudahan di bagian depan (input sederhana) sambil mempertahankan kekuatan dan kebenaran akuntansi di bagian belakang, dan kini dilengkapi kemampuan ekspor data yang superior serta manajemen data per periode.
-->
<!-- 
Visualization & Content Choices: 
-   **Entri Transaksi (Input Data):** Goal: Memasukkan data transaksi secara cepat dan intuitif. Method: Tabel HTML interaktif dengan kolom "Akun Debit", "Akun Kredit", dan "Jumlah". Interaction: Menambah baris dinamis, dropdown untuk pemilihan akun. Justification: Format ini lebih cepat untuk transaksi sederhana dan mengurangi kemungkinan kesalahan ketidakseimbangan. Library: Vanilla JS.
-   **Laporan & Analisis (Tampilan Data):** Goal: Menyajikan data keuangan yang akurat. Method: Semua laporan (Jurnal, Buku Besar, Laba Rugi, Analisis AI, Neraca) dihitung dari sumber data `state.jurnals` yang konsisten. Justification: Memisahkan logika input dari logika pelaporan membuat sistem lebih kuat dan mudah dikelola.
-   **UPDATED - Manajemen Piutang (Integrasi Penuh):** Goal: Menyederhanakan pencatatan dan pelunasan piutang. Method: Form input piutang akan membuat jurnal penjualan kredit. **NEW:** Tombol "Bayar" pada setiap kartu piutang akan membuka modal untuk mencatat pembayaran. Fungsi `addPayment` akan (1) mengurangi sisa piutang pada `state.piutangs`, dan (2) membuat jurnal pelunasan (Debit Kas, Kredit Piutang Usaha) di `state.jurnals`. Interaction: Kartu piutang lunas akan otomatis hilang dari daftar aktif. Justification: Otomatisasi jurnal ganda (saat piutang dibuat & saat dibayar) adalah inti dari sistem akuntansi yang baik, menghilangkan entri manual dan menjaga integritas data di semua laporan.
-   **NEW - Stok Barang (Fitur Mandiri):** Goal: Menyediakan manajemen inventaris dasar. Method: Menggunakan state terpisah (`state.stock`) yang disimpan dalam localStorage. Interaksi CRUD penuh di dalam tabnya. Justification: Memisahkannya dari data jurnal menyederhanakan implementasi.
-   **Download PDF (Enhanced):** Goal: Memberikan laporan PDF yang komprehensif. Method: Fungsi `generatePDF` membuat diagram dan tabel menggunakan Chart.js dan jspdf-autotable pada canvas tersembunyi. Justification: Menambahkan visualisasi data meningkatkan nilai dan profesionalisme laporan.
-   **CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.**
-->
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jurnal Umum Akuntansi</title>
  <link rel="icon" href="img/logo.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
  <div id="app" class="min-h-screen bg-gray-50">
    <!-- Modern Navbar -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <!-- Logo & Title -->
          <div class="flex items-center">
            <div class="flex-shrink-0 flex items-center">
              <i class="fas fa-calculator text-3xl text-blue-600 mr-3"></i>
              <div>
                <h1 class="text-xl font-bold text-gray-900">
                  Akuntansi Pacific AC
                </h1>
              </div>
            </div>
          </div>

          <!-- Period Indicator -->
          <div class="hidden md:flex items-center bg-blue-50 px-4 py-2 rounded-lg">
            <i class="fas fa-calendar-alt text-blue-600 mr-2"></i>
            <span class="text-sm font-medium text-blue-900" id="current-period-display"></span>
          </div>

          <!-- Mobile menu button -->
          <div class="md:hidden">
            <button id="mobile-menu-btn" class="text-gray-600 hover:text-gray-900 focus:outline-none">
              <i class="fas fa-bars text-2xl"></i>
            </button>
          </div>
        </div>

        <!-- Desktop Navigation -->
        <div class="hidden md:block border-t border-gray-200">
          <div class="flex space-x-1 py-2 overflow-x-auto">
            <!-- Dashboard -->
            <button onclick="app.changeTab('dashboard')"
              class="tab-button px-4 py-2 text-sm font-medium rounded-md transition-all hover:bg-gray-100"
              data-tab="dashboard">
              <i class="fas fa-home mr-1"></i>Dashboard
            </button>

            <!-- Transaksi Group -->
            <div class="border-l border-gray-200 mx-2"></div>
            <button onclick="app.changeTab('jurnal')"
              class="tab-button px-4 py-2 text-sm font-medium rounded-md transition-all hover:bg-gray-100"
              data-tab="jurnal">
              <i class="fas fa-edit mr-1"></i>Input
            </button>

            <!-- Laporan Group -->
            <div class="border-l border-gray-200 mx-2"></div>
            <button onclick="app.changeTab('bukuBesar')"
              class="tab-button px-4 py-2 text-sm font-medium rounded-md transition-all hover:bg-gray-100"
              data-tab="bukuBesar">
              <i class="fas fa-book mr-1"></i>Buku Besar
            </button>
            <button onclick="app.changeTab('trialBalance')"
              class="tab-button px-4 py-2 text-sm font-medium rounded-md transition-all hover:bg-gray-100"
              data-tab="trialBalance">
              <i class="fas fa-balance-scale-right mr-1"></i>Neraca Saldo
            </button>
            <button onclick="app.changeTab('labaRugi')"
              class="tab-button px-4 py-2 text-sm font-medium rounded-md transition-all hover:bg-gray-100"
              data-tab="labaRugi">
              <i class="fas fa-chart-line mr-1"></i>Laba Rugi
            </button>
            <button onclick="app.changeTab('neraca')"
              class="tab-button px-4 py-2 text-sm font-medium rounded-md transition-all hover:bg-gray-100"
              data-tab="neraca">
              <i class="fas fa-balance-scale mr-1"></i>Neraca
            </button>
            <button onclick="app.changeTab('arusKas')"
              class="tab-button px-4 py-2 text-sm font-medium rounded-md transition-all hover:bg-gray-100"
              data-tab="arusKas">
              <i class="fas fa-water mr-1"></i>Arus Kas
            </button>

            <!-- Data Group -->
            <div class="border-l border-gray-200 mx-2"></div>
            <button onclick="app.changeTab('dataPiutang')"
              class="tab-button px-4 py-2 text-sm font-medium rounded-md transition-all hover:bg-gray-100"
              data-tab="dataPiutang">
              <i class="fas fa-file-invoice-dollar mr-1"></i>Piutang
            </button>
            <button onclick="app.changeTab('stockBarang')"
              class="tab-button px-4 py-2 text-sm font-medium rounded-md transition-all hover:bg-gray-100"
              data-tab="stockBarang">
              <i class="fas fa-boxes mr-1"></i>Stok
            </button>

            <!-- Settings -->
            <div class="border-l border-gray-200 mx-2"></div>
            <button onclick="app.changeTab('pengaturan')"
              class="tab-button px-4 py-2 text-sm font-medium rounded-md transition-all hover:bg-gray-100"
              data-tab="pengaturan">
              <i class="fas fa-cog mr-1"></i>Pengaturan
            </button>
          </div>
        </div>

        <!-- Mobile Navigation (Hidden by default) -->
        <div id="mobile-menu" class="hidden md:hidden border-t border-gray-200 py-2">
          <div class="space-y-1">
            <button onclick="app.changeTab('dashboard')"
              class="mobile-tab-button block w-full text-left px-4 py-2 text-sm font-medium rounded-md hover:bg-gray-100"
              data-tab="dashboard">
              <i class="fas fa-home mr-2"></i>Dashboard
            </button>
            <button onclick="app.changeTab('jurnal')"
              class="mobile-tab-button block w-full text-left px-4 py-2 text-sm font-medium rounded-md hover:bg-gray-100"
              data-tab="jurnal">
              <i class="fas fa-edit mr-2"></i>Input Transaksi
            </button>
            <div class="border-t border-gray-200 my-2"></div>
            <p class="px-4 py-1 text-xs font-semibold text-gray-500 uppercase">
              Laporan
            </p>
            <button onclick="app.changeTab('bukuBesar')"
              class="mobile-tab-button block w-full text-left px-4 py-2 text-sm font-medium rounded-md hover:bg-gray-100"
              data-tab="bukuBesar">
              <i class="fas fa-book mr-2"></i>Buku Besar
            </button>
            <button onclick="app.changeTab('trialBalance')"
              class="mobile-tab-button block w-full text-left px-4 py-2 text-sm font-medium rounded-md hover:bg-gray-100"
              data-tab="trialBalance">
              <i class="fas fa-balance-scale-right mr-2"></i>Neraca Saldo
            </button>
            <button onclick="app.changeTab('labaRugi')"
              class="mobile-tab-button block w-full text-left px-4 py-2 text-sm font-medium rounded-md hover:bg-gray-100"
              data-tab="labaRugi">
              <i class="fas fa-chart-line mr-2"></i>Laba Rugi
            </button>
            <button onclick="app.changeTab('neraca')"
              class="mobile-tab-button block w-full text-left px-4 py-2 text-sm font-medium rounded-md hover:bg-gray-100"
              data-tab="neraca">
              <i class="fas fa-balance-scale mr-2"></i>Neraca
            </button>
            <button onclick="app.changeTab('arusKas')"
              class="mobile-tab-button block w-full text-left px-4 py-2 text-sm font-medium rounded-md hover:bg-gray-100"
              data-tab="arusKas">
              <i class="fas fa-water mr-2"></i>Arus Kas
            </button>
            <div class="border-t border-gray-200 my-2"></div>
            <p class="px-4 py-1 text-xs font-semibold text-gray-500 uppercase">
              Data
            </p>
            <button onclick="app.changeTab('dataPiutang')"
              class="mobile-tab-button block w-full text-left px-4 py-2 text-sm font-medium rounded-md hover:bg-gray-100"
              data-tab="dataPiutang">
              <i class="fas fa-file-invoice-dollar mr-2"></i>Piutang
            </button>
            <button onclick="app.changeTab('stockBarang')"
              class="mobile-tab-button block w-full text-left px-4 py-2 text-sm font-medium rounded-md hover:bg-gray-100"
              data-tab="stockBarang">
              <i class="fas fa-boxes mr-2"></i>Stok
            </button>
            <div class="border-t border-gray-200 my-2"></div>
            <button onclick="app.changeTab('pengaturan')"
              class="mobile-tab-button block w-full text-left px-4 py-2 text-sm font-medium rounded-md hover:bg-gray-100"
              data-tab="pengaturan">
              <i class="fas fa-cog mr-2"></i>Pengaturan
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div id="dashboard-tab" class="tab-content">...</div>
      <div id="jurnal-tab" class="tab-content hidden">...</div>
      <div id="bukuBesar-tab" class="tab-content hidden">...</div>
      <div id="trialBalance-tab" class="tab-content hidden">...</div>
      <div id="neraca-tab" class="tab-content hidden">...</div>
      <div id="labaRugi-tab" class="tab-content hidden">...</div>
      <div id="arusKas-tab" class="tab-content hidden">...</div>
      <div id="dataPiutang-tab" class="tab-content hidden">...</div>
      <div id="stockBarang-tab" class="tab-content hidden">...</div>
      <div id="pengaturan-tab" class="tab-content hidden">...</div>
    </main>
  </div>

  <div id="modal" class="modal-backdrop hidden">
    <div class="modal-content">
      <h3 id="modal-title" class="text-lg font-semibold mb-4"></h3>
      <div id="modal-body"></div>
      <div id="modal-actions" class="mt-6 text-right space-x-2"></div>
    </div>
  </div>

  <!-- Canvas tersembunyi untuk generate chart PDF -->
  <canvas id="pdf-chart" width="800" height="400" style="display: none"></canvas>
  <canvas id="pdf-pie-chart" width="400" height="400" style="display: none">
  </canvas>

  <!-- Required libraries -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

  <script type="module" src="js/app.js"></script>
</body>

</html>